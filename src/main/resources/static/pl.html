
<!DOCTYPE html>
<html lang="en">
<head>
  <title>Bootstrap Example</title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <script src="//ajax.googleapis.com/ajax/libs/angularjs/1.6.1/angular.js"></script>
    <script src="//ajax.googleapis.com/ajax/libs/angularjs/1.6.1/angular-animate.js"></script>
    <script src="//ajax.googleapis.com/ajax/libs/angularjs/1.6.1/angular-sanitize.js"></script>
    <script src="//angular-ui.github.io/bootstrap/ui-bootstrap-tpls-2.5.0.js"></script>
    
    
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.0/css/bootstrap.min.css">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.0/js/bootstrap.min.js"></script>
</head>
<body style = "background-color: #cccccc0d;">
<style>
	.table-condensed>tbody>tr>td, .table-condensed>tbody>tr>th, .table-condensed>tfoot>tr>td, .table-condensed>tfoot>tr>th, .table-condensed>thead>tr>td, .table-condensed>thead>tr>th {
    	border-style:none;
	}
	
	label {
	    font-weight: 1;
	    font-family: monospace;
	    color: darkslateblue;
	}
	h2{
		font-weight:200;
	}
	.well{
		background-color: white;
		box-shadow: 0px 0px 7px 3px rgba(0,0,0,.05);
	}
</style>
<div class="container" >
<div class="container" ng-app="myApp" ng-controller="myCtrl">
<BR><BR>

 <form class="form-inline ">
	<div class="">
	<div style = "">
		<div style ="font-size:70px;float:left;font-weight:300;"> Profit & Loss </div>
		<BR>
		<div style = "float:right;widht:relative;">
			<div  style="float:left;">
			<input type="text" id="symbol" ng-model="company" class="form-control input-sm"
		    placeholder="Company" uib-typeahead="comp.symbol as comp.symbol for comp in nse_companies | filter:{name:$viewValue}| limitTo:8"  
		    typeahead-show-hint="true" typeahead-min-length="0"> 
		    </div>
			 &nbsp; for the year &nbsp;   
			<input id="pl_year" ng-model = "pl_year" type="text" class="form-control input-sm" placeholder="year">
			<button type="button" class="btn btn-success" ng-click="savePnL();">Save</button>
			<button type="button" class="btn btn-info" ng-click="getCompanyPnL();">Load</button>
		</div>	
	</div>
    

<BR><BR>
<BR><BR>

	
	<div class="well">
	<h2>Income</h2>
	<BR>    
	 <table class="table table-condensed ">
	    <tbody>
	      <tr>
	        <td><label for="focusedInput">Gross revenue from operations</label></td>
	        <td> <input id="pl_grossRevenueFromOperations" ng-model = "pl_grossRevenueFromOperations" type="text" class="form-control input-sm" placeholder=""> </td>
	        <td> <label for="focusedInput">Excise or service tax or other levies</label></td>
	        <td> <input id="pl_exciseOrServiceTaxOrOtherLevies" ng-model = "pl_exciseOrServiceTaxOrOtherLevies" type="text" class="form-control input-sm" placeholder="">
		    </td>
	      </tr>
	      <tr>
	        <td><label for="focusedInput">Net revenue from operations</label></td>
	        <td><input id="pl_netRevenueFromOperations" ng-model = "pl_netRevenueFromOperations" type="text" class="form-control input-sm" placeholder=""></td>
	        <td><label for="focusedInput">Other operating revenues</label></td>
	        <td><input id="pl_otherOperatingRevenues" ng-model = "pl_otherOperatingRevenues" type="text" class="form-control input-sm" placeholder=""></td>
	      </tr>
	      <tr>
	        <td><label for="focusedInput">Total operating revenues</label></td>
	        <td><input id="pl_totalOperatingRevenues" ng-model = "pl_totalOperatingRevenues" type="text" class="form-control input-sm" placeholder=""></td>
	        <td><label for="focusedInput">Other income</label></td>
	        <td><input id="pl_otherIncome" ng-model = "pl_otherIncome" type="text" class="form-control input-sm" placeholder=""></td>
	      </tr>
	      <tr>
	        <td><label for="focusedInput">Total revenue</label></td>
	        <td><input id="pl_totalRevenue" ng-model = "pl_totalRevenue" type="text" class="form-control input-sm" placeholder=""></td>
	        <td></td>
	        <td></td>
	      </tr>
	        
	        <tr><td></td></tr>
			<tr><td></td></tr>
			<tr><td></td></tr>
			<tr><td></td></tr>
			
	    	<tr><td colspan = "4"><h2>Expenses</h2></td></tr>
			
		      <tr>
		        <td><label for="focusedInput">Cost of material consumed </label></td>
		        <td><input id="pl_costOfMaterialConsumed" ng-model = "pl_costOfMaterialConsumed" type="text" class="form-control input-sm" placeholder="">
			    </td>
		        <td><label for="focusedInput">Purchase of stocks in trade </label></td>
		        <td><input id="pl_purchaseOfStocksInTrade" ng-model = "pl_purchaseOfStocksInTrade" type="text" class="form-control input-sm" placeholder=""></td>
		      </tr>
		      <tr>
		        <td><label for="focusedInput">Change of inventories of FG wip and Stock in Trade </label></td>
		        <td><input id="pl_changeOfInventoriesOfFgWipAndStockInTrade" ng-model = "pl_changeOfInventoriesOfFgWipAndStockInTrade" type="text" class="form-control input-sm" placeholder=""></td>
		        <td><label for="focusedInput">Employment benefit expenses</label></td>
		        <td><input id="pl_employmentBenefitExpenses" ng-model = "pl_employmentBenefitExpenses" type="text" class="form-control input-sm" placeholder=""></td>
		      </tr>
		      <tr>
		        <td><label for="focusedInput">Finance costs</label></td>
		        <td><input id="pl_financeCosts" ng-model = "pl_financeCosts" type="text" class="form-control input-sm" placeholder=""></td>
		        <td><label for="focusedInput">Depreciation and amortisation expenses</label></td>
		        <td><input id="pl_depreciationAndAmortisationExpenses" ng-model = "pl_depreciationAndAmortisationExpenses" type="text" class="form-control input-sm" placeholder=""></td>
		      </tr>
		      <tr>
		        <td><label for="focusedInput">Other expenses</label></td>
		        <td><input id="pl_otherExpenses" ng-model = "pl_otherExpenses" type="text" class="form-control input-sm" placeholder=""></td>
		        <td><label for="focusedInput">Amount transfer to capital accounts</label></td>
		        <td><input id="pl_amountTransferToCapitalAccounts" ng-model = "pl_amountTransferToCapitalAccounts" type="text" class="form-control input-sm" placeholder=""></td>
		      </tr>
		      <tr>
		        <td><label for="focusedInput">Total expenses</label></td>
		        <td><input id="pl_totalExpenses" ng-model = "pl_totalExpenses" type="text" class="form-control input-sm" placeholder=""></td>
		      </tr>
		      
		    <tr><td></td></tr>
			<tr><td></td></tr>
			<tr><td></td></tr>
			<tr><td></td></tr>
			
			
			<tr><td colspan = "4">
			<h2>Profit/Loss before exceptional, extraordinary items & tax</h2>
			</td></tr>
			  <tr>
		      <td><label for="focusedInput">Exceptional items</label></td>
		      <td><input id="pl_exceptionalItems" ng-model = "pl_exceptionalItems" type="text" class="form-control input-sm" placeholder=""></td>
		      <td><label for="focusedInput">Profit loss before tax</label></td>
		      <td><input id="pl_profitLossBeforeTax" ng-model = "pl_profitLossBeforeTax" type="text" class="form-control input-sm" placeholder=""></td>
		      </tr>
		      
		      
		    <tr><td></td></tr>
			<tr><td></td></tr>
			<tr><td></td></tr>
			<tr><td></td></tr>
		      
				<tr>
				<td colspan = "4">
				<h2>Tax expenses-continued operations</h2>
				</td>
				</tr>
	    
				<tr>
				<td><label for="focusedInput">Current tax</label></td>
				<td><input id="pl_currentTax" ng-model = "pl_currentTax" type="text" class="form-control input-sm" placeholder=""></td>
				<td><label for="focusedInput">Mat credit entitlement</label></td>
				<td><input id="pl_matCreditEntitlement" ng-model = "pl_matCreditEntitlement" type="text" class="form-control input-sm" placeholder=""></td>
				</tr>
				
				<tr>
				<td><label for="focusedInput">Deferred tax</label></td>
				<td><input id="pl_deferredTax" ng-model = "pl_deferredTax" type="text" class="form-control input-sm" placeholder=""></td>
				<td><label for="focusedInput">Total tax expenses</label></td>
				<td><input id="pl_totalTaxExpenses" ng-model = "pl_totalTaxExpenses" type="text" class="form-control input-sm" placeholder=""></td>
				</tr>
				
				<tr>
				<td><label for="focusedInput">Profit loss after tax and before extra ordinary items</label></td>
				<td><input id="pl_profitLossAfterTaxAndBeforeExtraOrdinaryItems" ng-model = "pl_profitLossAfterTaxAndBeforeExtraOrdinaryItems" type="text" class="form-control input-sm" placeholder=""></td>
				<td><label for="focusedInput"> Profit loss for the period</label></td>
				<td><input id="pl_profitLossForThePeriod" ng-model = "pl_profitLossForThePeriod" type="text" class="form-control input-sm" placeholder=""></td>
				</tr>
				
				
				<tr><td></td></tr>
				<tr><td></td></tr>
				<tr><td></td></tr>
				<tr><td></td></tr>
				
				<tr><td colspan = "4">
				<h2>Other additional information</h2>
				</td></tr>		
		
				<tr>
				<td><label for="focusedInput">Basic EPS</label></td>
				<td><input id="pl_basicEps" ng-model = "pl_basicEps" type="text" class="form-control input-sm" placeholder=""></td>
				</tr>
				
				<tr>
				<td><label for="focusedInput">Diluted EPS</label></td>
				<td><input id="pl_dilutedEps" ng-model = "pl_dilutedEps" type="text" class="form-control input-sm" placeholder=""></td>
				</tr>
	
	
	 		<tr><td></td></tr>
			<tr><td></td></tr>
			<tr><td></td></tr>
			<tr><td></td></tr>
	
	
				<tr>
					<td colspan = "4">
						<h2>Value of imported and indigenous raw materials</h2> 
					</td>
				</tr>
				<tr>
				<td><label for="focusedInput">Imported raw materials</label></td>
				<td><input id="pl_importedRawMaterials" ng-model = "pl_importedRawMaterials" type="text" class="form-control input-sm" placeholder=""></td>
				</tr>
				
				<tr>
				<td><label for="focusedInput">Indigenous raw materials</label></td>
				<td><input id="pl_indigenousRawMaterials" ng-model = "pl_indigenousRawMaterials" type="text" class="form-control input-sm" placeholder=""></td>
				</tr>



 			<tr><td></td></tr>
			<tr><td></td></tr>
			<tr><td></td></tr>
			<tr><td></td></tr>

				<tr>
					<td colspan = "4">
						<h2>Stores, spares & loose tools</h2>    
					</td>
				</tr>

				<tr>
				<td><label for="focusedInput">Imported stores & spares</label></td>
				<td><input id="pl_importedStoresAndSpares" ng-model = "pl_importedStoresAndSpares" type="text" class="form-control input-sm" placeholder=""></td>
				</tr>
				
				<tr>
				<td><label for="focusedInput">Indegenous stores & spares</label></td>
				<td><input id="pl_indegenousStoresAndSpares" ng-model = "pl_indegenousStoresAndSpares" type="text" class="form-control input-sm" placeholder=""></td>
				</tr>



 			<tr><td></td></tr>
			<tr><td></td></tr>
			<tr><td></td></tr>
			<tr><td></td></tr>
			
				<tr>
					<td colspan = "4"><h2>Dividend & dividend percentage</h2>
				 	</td>
			 	</tr>
		 
				<tr>
				<td><label for="focusedInput">Equity share dividend</label></td>
				<td><input id="pl_equityShareDividend" ng-model = "pl_equityShareDividend" type="text" class="form-control input-sm" placeholder=""></td>
				</tr>
				
				<tr>
				<td><label for="focusedInput">Tax on dividend</label></td>
				<td><input id="pl_taxOnDividend" ng-model = "pl_taxOnDividend" type="text" class="form-control input-sm" placeholder=""></td>
				</tr>
				
				<tr>
				<td><label for="focusedInput">Equity dividend rate</label></td>
				<td><input id="pl_equityDividendRate" ng-model = "pl_equityDividendRate" type="text" class="form-control input-sm" placeholder=""></td>
				</tr>
				
			</tbody>
		</table>
	</div>
	
	</div> 
</form>
</div>
</div>

</body>
<script type="text/javascript">
	var app = angular.module('myApp', ['ngAnimate', 'ngSanitize','ui.bootstrap']);
	app.controller('myCtrl', function($scope, $http, $interval) {
		
		  $scope.pl_year = null;
		  $scope.company = null;
		
		  //In Crore/million/billion
		  $scope.pl_unitMultiplier = null;
		
		  //INCOME
		  $scope.pl_grossRevenueFromOperations  = null;
		  $scope.pl_exciseOrServiceTaxOrOtherLevies  = null;
		  $scope.pl_netRevenueFromOperations  = null;
		  $scope.pl_otherOperatingRevenues  = null; 
		  $scope.pl_totalOperatingRevenues  = null;
		  $scope.pl_otherIncome  = null;
  		  $scope.pl_totalRevenue  = null;
		
		   //EXPENSES
		   $scope.pl_costOfMaterialConsumed = null; 
		   $scope.pl_purchaseOfStocksInTrade = null;
		   $scope.pl_changeOfInventoriesOfFgWipAndStockInTrade = null;
		   $scope.pl_employmentBenefitExpenses = null; 
		   $scope.pl_financeCosts = null;
		   $scope.pl_depreciationAndAmortisationExpenses = null; 
		   $scope.pl_otherExpenses = null;
		   $scope.pl_amountTransferToCapitalAccounts = null;
		   $scope.pl_totalExpenses = null;
		
		   //PROFIT/LOSS BEFORE EXCEPTIONAL, EXTRAORDINARY ITEMS AND TAX
		   $scope.pl_exceptionalItems = null; 
		   $scope.pl_profitLossBeforeTax = null;
		
		   //TAX EXPENSES-CONTINUED OPERATIONS
		   $scope.pl_currentTax = null;
		   $scope.pl_matCreditEntitlement = null;
		   $scope.pl_deferredTax = null;
		
		   $scope.pl_totalTaxExpenses = null;   
		   $scope.pl_profitLossAfterTaxAndBeforeExtraOrdinaryItems = null;
		   $scope.pl_profitLossForThePeriod = null;
		
		   //OTHER ADDITIONAL INFORMATION
		   //EARNING PER SHARE
		   $scope.pl_basicEps = null;  
		   $scope.pl_dilutedEps = null; 
		
		   //VALUE OF IMPORTED AND INDIGENIOUS RAW MATERIALS
		   $scope.pl_importedRawMaterials = null;
		   $scope.pl_indigenousRawMaterials = null;
		
		   //STORES, SPARES AND LOOSE TOOLS
		   $scope.pl_importedStoresAndSpares = null;
		   $scope.pl_indegenousStoresAndSpares = null;
		
		   //DIVIDEND AND DIVIDEND PERCENTAGE
		   $scope.pl_equityShareDividend = null;
		   $scope.pl_taxOnDividend = null;
		   $scope.pl_equityDividendRate = null;
		   
		   
		   $scope.savePnL = function(){
			   $http({
				    method : "POST",
				    url : "/company/" + $scope.company + "/pl",
				    data: { company: {symbol: $scope.company}, 
					    	year:$scope.pl_year, 
					    	grossRevenueFromOperations: $scope.pl_grossRevenueFromOperations,
					    	exciseOrServiceTaxOrOtherLevies: $scope.pl_exciseOrServiceTaxOrOtherLevies,
					    	netRevenueFromOperations: $scope.pl_netRevenueFromOperations,
					    	otherOperatingRevenues: $scope.pl_otherOperatingRevenues,
					    	totalOperatingRevenues: $scope.pl_totalOperatingRevenues,
					    	otherIncome: $scope.pl_otherIncome,
					    	totalRevenue: $scope.pl_totalRevenue,
					    	costOfMaterialConsumed: $scope.pl_costOfMaterialConsumed,
					    	purchaseOfStocksInTrade: $scope.pl_purchaseOfStocksInTrade, 
					    	changeOfInventoriesOfFgWipAndStockInTrade: $scope.pl_changeOfInventoriesOfFgWipAndStockInTrade,
					    	employmentBenefitExpenses: $scope.pl_employmentBenefitExpenses, 
					    	financeCosts: $scope.pl_financeCosts, 
					    	depreciationAndAmortisationExpenses: $scope.pl_depreciationAndAmortisationExpenses,
					    	financeCosts: $scope.pl_financeCosts,
					    	depreciationAndAmortisationExpenses: $scope.pl_depreciationAndAmortisationExpenses, 
					    	otherExpenses: $scope.pl_otherExpenses,
					    	amountTransferToCapitalAccounts: $scope.pl_amountTransferToCapitalAccounts,
					    	totalExpenses: $scope.pl_totalExpenses,
					    	exceptionalItems: $scope.pl_exceptionalItems,
					    	profitLossBeforeTax: $scope.pl_profitLossBeforeTax,
					    	currentTax: $scope.pl_currentTax,
					    	matCreditEntitlement: $scope.pl_matCreditEntitlement,
					    	deferredTax: $scope.pl_deferredTax,
					    	totalTaxExpenses: $scope.pl_totalTaxExpenses,
					    	profitLossAfterTaxAndBeforeExtraOrdinaryItems: $scope.pl_profitLossAfterTaxAndBeforeExtraOrdinaryItems,
					    	profitLossForThePeriod: $scope.pl_profitLossForThePeriod,
					    	basicEps: $scope.pl_basicEps,  
					    	dilutedEps: $scope.pl_dilutedEps,
					    	importedRawMaterials: $scope.pl_importedRawMaterials,
					    	indigenousRawMaterials: $scope.pl_indigenousRawMaterials,
					    	equityShareDividend: $scope.pl_equityShareDividend, 
					    	taxOnDividend: $scope.pl_taxOnDividend,
					    	importedStoresAndSpares: $scope.pl_importedStoresAndSpares,
				    		indegenousStoresAndSpares: $scope.pl_indegenousStoresAndSpares,
				    		equityDividendRate: $scope.pl_equityDividendRate
				    	}
				  }).then(function mySuccess(response) {
				         $scope.loading = false
				    	 
				    }, function myError(response) {
				      $scope.myWelcome = response.statusText;
				      $scope.loading = false;
				});	   
		   }
		   
		 $scope.getCompanyPnL = function(){
			 $http({method: "GET", 
				url: "/company/" + $scope.company + "/pl/" + $scope.pl_year	 
			 }).then(function success(response){
				 $scope.loading = false;
				 $scope.pl_grossRevenueFromOperations = response.data.grossRevenueFromOperations;
		    	 $scope.pl_exciseOrServiceTaxOrOtherLevies = response.data.exciseOrServiceTaxOrOtherLevies;
		    	 $scope.pl_netRevenueFromOperations = response.data.netRevenueFromOperations;
		    	 $scope.pl_otherOperatingRevenues = response.data.otherOperatingRevenues;
		    	 $scope.pl_totalOperatingRevenues = response.data.totalOperatingRevenues;
		    	 $scope.pl_otherIncome = response.data.otherIncome;
		    	 $scope.pl_totalRevenue = response.data.totalRevenue;
		    	 $scope.pl_costOfMaterialConsumed = response.data.costOfMaterialConsumed;
		    	 $scope.pl_purchaseOfStocksInTrade = response.data.purchaseOfStocksInTrade;
		    	 $scope.pl_changeOfInventoriesOfFgWipAndStockInTrade = response.data.changeOfInventoriesOfFgWipAndStockInTrade;
		    	 $scope.pl_employmentBenefitExpenses = response.data.employmentBenefitExpenses;
		    	 $scope.pl_financeCosts = response.data.financeCosts;
		    	 $scope.pl_depreciationAndAmortisationExpenses = response.data.depreciationAndAmortisationExpenses;
		    	 $scope.pl_financeCosts = response.data.financeCosts;
		    	 $scope.pl_depreciationAndAmortisationExpenses = response.data.depreciationAndAmortisationExpenses;
		    	 $scope.pl_otherExpenses = response.data.otherExpenses;
		    	 $scope.pl_amountTransferToCapitalAccounts = response.data.amountTransferToCapitalAccounts
		    	 $scope.pl_totalExpenses = response.data.totalExpenses;
		    	 $scope.pl_exceptionalItems = response.data.exceptionalItems;
		    	 $scope.pl_profitLossBeforeTax = response.data.profitLossBeforeTax;
		    	 $scope.pl_currentTax = response.data.currentTax;
		    	 $scope.pl_matCreditEntitlement = response.data.matCreditEntitlement;
		    	 $scope.pl_deferredTax = response.data.deferredTax;
		    	 $scope.pl_totalTaxExpenses = response.data.totalTaxExpenses;
		    	 $scope.pl_profitLossAfterTaxAndBeforeExtraOrdinaryItems = response.data.profitLossAfterTaxAndBeforeExtraOrdinaryItems;
		    	 $scope.pl_profitLossForThePeriod = response.data.profitLossForThePeriod;
		    	 $scope.pl_basicEps = response.data.basicEps;
		    	 $scope.pl_dilutedEps = response.data.dilutedEps;
		    	 $scope.pl_importedRawMaterials = response.data.importedRawMaterials;
		    	 $scope.pl_indigenousRawMaterials = response.data.indigenousRawMaterials;
		    	 $scope.pl_equityShareDividend = response.data.equityShareDividend;
		    	 $scope.pl_taxOnDividend = response.data.taxOnDividend;
			     $scope.pl_importedStoresAndSpares =  response.data.importedStoresAndSpares;
			     $scope.pl_indegenousStoresAndSpares = response.data.indegenousStoresAndSpares;
			     $scope.pl_equityDividendRate = response.data.equityDividendRate;
			 }, function error(response){
				 $scope.loading = false;
				 
			 });
		 }  
	});
	
</script>
</html>



